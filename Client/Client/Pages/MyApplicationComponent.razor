@page "/MyApplication"

@using AndriuhaAssignment.Models
@using AndriuhaAssignment.Data
@inject NavigationManager NavigationManager
@inject IApplicationService ApplicationService
@inject HttpClient Http

if (todosToShow == null) {
    <p>
        <em>Loading...</em>
    </p>
} else if (!todosToShow.Any()) {
    <p>
        <em>No ToDo items exist. Please add some.</em>
    </p>
} else {
    <table class="table">
        <thead>
        <tr>
            <th>ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>JobTitle</th>
            <th>Hair Color</th>
            <th>Eye Color</th>
            <th>Age</th>
            <th>Weight</th>
            <th>Height</th>
            <th>Sex</th>
            <th>Update</th>
            <th>Delete</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var item in todosToShow) {
            <tr>
                <td>@item.FirstName</td>
                <td>@item.LastName</td>
                <td>@item.Email</td>
                <td>@item.PhoneNumber</td>
                <td>@item.JobExperience</td>
                <td>@item.Languages</td>
                <td>@item.DrivingLicenses</td>
                <td>@item.PreferableWorkTime</td>
            </tr>
        }
        </tbody>
    </table>
}



@code {
    
    private IList<Application> todosToShow;
    private IList<Application> allTodos;

    
    protected override async Task OnInitializedAsync()
    {
        allTodos = await ApplicationService.GetAllApplicationsAsync();
        todosToShow = allTodos;
    }
}